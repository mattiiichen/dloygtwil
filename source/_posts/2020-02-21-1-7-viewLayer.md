---
title: 1.7 View Layer
date: 2020-02-21 16:48:49
tags: Magento 2
categories: WEB
toc: true
---

Blocks
Templates
Layouts
<!-- more -->



Block

先在 Block 資料夾下建立 Block 程式，並且先命名 namespace 
namespace Mastering\SampleModule\Block;

也要先引入 Magento Template 模組
我們要描繪我們稍早前建立的 item 集合
使用依賴注入，把 collection factory 注入到 Class裡

先建立建構子

```
    public function __construct(
        Template\Context $context,
        CollectionFactory $collectionFactory,
        array $data = []
    ) {
        $this->collectionFactory = $collectionFactory;
        parent::__construct($context, $data);
    }
```

建構子是有父繼承： parent::__construct($context, $data)


它最後會回傳 instances of models

之後建立 template 針對這個 block
template is view 設計的元件
記得 view folder 要和etc 一樣全部小寫
我們要把 view 描繪到 frontend 就要建立一個在frontend 底下的template資料夾
再template底下的是 phtml格式
template 檔名命名名字看起來沒有關聯，可以指定

layout 主要就是合併 block 和 template

最後合併 Block 和 Template，使用 Layout 


Layout 的命名方式： mastering_index_index.xml
第一個 mastering是 /etc/fronted/routes.xml 裡的 route tag 屬性 frontName
第二個 index 為 Controller > index
第三個 index 為 Action name 也是為 index。有一個問題？是檔名index.php 的 index ，還是裡面繼承的 index class？

記住，若有改到layout 就要清cache ，上面說的，但也有同事說，改到xml就要清cache，再找時間求証

再到browser 增加/mastering => 這個是依據哪的？


Created Module
Installed and upgraded database
Created Model, View and Controller layers
Tested integration of all module components


Hello block that have templates and our block will have a template should extend Magento framework view element template class.
I would like to surrender our items collection we created earlier in this block
